<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Writing automated tests - Rust drills, all based on &#x27;The Book&#x27; - the official Rust Programming Language book</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded "><a href="../chapter_1/chapter_1.html"><strong aria-hidden="true">1.</strong> Rust Overview</a></li><li class="chapter-item expanded "><a href="../chapter_2/chapter_2.html"><strong aria-hidden="true">2.</strong> Rust Cargo</a></li><li class="chapter-item expanded "><a href="../chapter_3/chapter_3.html"><strong aria-hidden="true">3.</strong> Variables and Mutability, Data Types</a></li><li class="chapter-item expanded "><a href="../chapter_4/chapter_4.html"><strong aria-hidden="true">4.</strong> Functions, Comments, Control Flow</a></li><li class="chapter-item expanded "><a href="../chapter_5/chapter_5.html"><strong aria-hidden="true">5.</strong> Programming a 'Guess the number Game'</a></li><li class="chapter-item expanded "><a href="../chapter_6/chapter_6.html"><strong aria-hidden="true">6.</strong> Understanding Ownership</a></li><li class="chapter-item expanded "><a href="../chapter_7/chapter_7.html"><strong aria-hidden="true">7.</strong> References and Borrowing, The Slice data type</a></li><li class="chapter-item expanded "><a href="../chapter_8/chapter_8.html"><strong aria-hidden="true">8.</strong> Using Structs to structure related data</a></li><li class="chapter-item expanded "><a href="../chapter_9/chapter_9.html"><strong aria-hidden="true">9.</strong> Enums and Pattern matching</a></li><li class="chapter-item expanded "><a href="../chapter_10/chapter_10.html"><strong aria-hidden="true">10.</strong> Managing Growing Projects with Packages, Crates, and Module</a></li><li class="chapter-item expanded "><a href="../chapter_11/index.html"><strong aria-hidden="true">11.</strong> Common Collections</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter_11/chapter_11-1.html"><strong aria-hidden="true">11.1.</strong> Storing Lists of Values with Vectors</a></li><li class="chapter-item expanded "><a href="../chapter_11/chapter_11-2.html"><strong aria-hidden="true">11.2.</strong> Storing UTF-8 Encoded Text with Strings</a></li><li class="chapter-item expanded "><a href="../chapter_11/chapter_11-3.html"><strong aria-hidden="true">11.3.</strong> Storing Keys with Associated Values in Hash Maps</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter_12/chapter_12.html"><strong aria-hidden="true">12.</strong> Error Handling</a></li><li class="chapter-item expanded "><a href="../chapter_13/chapter_13.html"><strong aria-hidden="true">13.</strong> Generic Types, Traits, and Lifetimes</a></li><li class="chapter-item expanded "><a href="../chapter_14/chapter_14.html" class="active"><strong aria-hidden="true">14.</strong> Writing automated tests</a></li><li class="chapter-item expanded "><a href="../chapter_15/chapter_15.html"><strong aria-hidden="true">15.</strong> Bonus chap (Command Line project chapter)</a></li><li class="chapter-item expanded "><a href="../chapter_16/chapter_16.html"><strong aria-hidden="true">16.</strong> Functional language features - Closures and Iterators</a></li><li class="chapter-item expanded "><a href="../chapter_17/chapter_17.html"><strong aria-hidden="true">17.</strong> More about Cargo and crates.io</a></li><li class="chapter-item expanded "><a href="../chapter_18/chapter_18.html"><strong aria-hidden="true">18.</strong> Smart Pointers</a></li><li class="chapter-item expanded "><a href="../chapter_19/chapter_19.html"><strong aria-hidden="true">19.</strong> Fearless Concurrency</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Rust drills, all based on &#x27;The Book&#x27; - the official Rust Programming Language book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="writing-automated-tests"><a class="header" href="#writing-automated-tests">Writing automated tests</a></h1>
<h4 id="1-describe-rust-tests"><a class="header" href="#1-describe-rust-tests">1. Describe Rust tests</a></h4>
<p>Tests are Rust functions that verify that the non-test code is functioning in the expected manner.</p>
<h4 id="2-what-does-the-bodies-of-test-functions-typically-perform"><a class="header" href="#2-what-does-the-bodies-of-test-functions-typically-perform">2. What does the bodies of test functions typically perform?</a></h4>
<p>These three actions:</p>
<ul>
<li>Set up any needed data or state</li>
<li>Run the code you want to test</li>
<li>Assert the results are what you expect</li>
</ul>
<h4 id="3-mention-three-example-features-that-rust-provides-specifically-for-writing-tests-that-perform-the-three-actions-listed-in-no2-above"><a class="header" href="#3-mention-three-example-features-that-rust-provides-specifically-for-writing-tests-that-perform-the-three-actions-listed-in-no2-above">3. Mention three example features that Rust provides specifically for writing tests that perform the three actions listed in no.2 above</a></h4>
<ul>
<li>The 'test' attribute</li>
<li>a few macros</li>
<li>The 'should_panic' attribute</li>
</ul>
<h4 id="4-describe-the-anatomy-of-a-test-function"><a class="header" href="#4-describe-the-anatomy-of-a-test-function">4. Describe the anatomy of a test function</a></h4>
<p>A test in Rust is a function that is annotated with the 'test' attribute. Attributes are metadata about pieces of Rust code.
To change a function into a test function, add ' #[test] ' on the line before 'fn'. Then when you run your tests with the &quot;cargo test&quot; command, Rust builds a test runner binary that runs the functions annotated with the 'test' attribute and reports on wheter each test function passes or fails.
N.B:
When you make a new library project with Cargo, a test module with a test function is automatically generated for you. This module helps you start writing your tests so you don't have to look up the exact structure and syntax of test functions every time you start a new project. In essence, the module lets you save test code as a template of sorts.</p>
<h4 id="5-showcase-cargo-commands-that-create-a-new-library-project-called-adder"><a class="header" href="#5-showcase-cargo-commands-that-create-a-new-library-project-called-adder">5. Showcase Cargo command(s) that create a new library project called 'adder'</a></h4>
<pre><code>$ cargo new adder --lib
</code></pre>
<h4 id="6-you-could-also-have-non-test-functions-in-the-tests-module-of-a-a-srclibrs-file-to-help-set-up-common-scenerios-or-perform-common-operations-true-or-false"><a class="header" href="#6-you-could-also-have-non-test-functions-in-the-tests-module-of-a-a-srclibrs-file-to-help-set-up-common-scenerios-or-perform-common-operations-true-or-false">6. You could also have non-test functions in the 'tests' module of a a 'src/lib.rs' file to help set up common scenerios or perform common operations, true or false?</a></h4>
<p>True.</p>
<h4 id="7-what-test-actions-are-performed-when-you-run-cargo-command"><a class="header" href="#7-what-test-actions-are-performed-when-you-run-cargo-command">7. What test actions are performed when you run Cargo command;</a></h4>
<pre><code>$  cargo test
</code></pre>
<p>Cargo test both your code and the documentation for your code.
The output of the test would look similar to the following;
<code>
result: ok.
1 passed;
0 ignored;
0 measured;
0 filtered out;
finished in 0.00s
</code></p>
<h4 id="8-how-does-the-assert-macro-work"><a class="header" href="#8-how-does-the-assert-macro-work">8. How does the assert! macro work?</a></h4>
<p>The assert! macro passes when its expression argument evaluates to True, fails, otherwise.
To assert that something is false, you'd use the 'assert' syntax like this;</p>
<pre><code>  assert(!expression); // it asserts that the 'expression' is note true.
</code></pre>
<ol start="9">
<li>Demonstrate code that uses the 'assert' macro in a test between two structs of the same type. The test to compare whether the width and height field of struct1 is greater than the width and height field of struct2</li>
</ol>
<pre><code>  #[derive(Debug)]
  struct Rectangle {
    width: u32,
    height: u32,
  }
  impl Rectange {
    fn can_hold(&amp;self, other: &amp;Rectangel) -&gt; bool {
      self.width &gt; other.width &amp;&amp; self.height &gt; other.height
    }
  }
  // now the test mod
  #[cfg(test)]
  // now the test
  mod tests {
    use super::*;
    #[test]
    fn larger_can_hold_smaller() {
      let larger = Rectangle {
        width: 8,
        height: 7,
      };
      let smaller = Rectangle {
        width: 5,
        height: 1,
      };
      // now the use of the assert! macro
      assert!(larger.can_hold(&amp;smaller));
    }
  }
</code></pre>
<h4 id="10-list-two-macros-that-rust-provides-to-check-against-equality"><a class="header" href="#10-list-two-macros-that-rust-provides-to-check-against-equality">10. List two macros that Rust provides to check against equality</a></h4>
<p>assert_eq!</p>
<p>assert_ne!</p>
<h4 id="11-what-advantage-do-macros-assert_eq-and-assert_ne-have-over-macro-assert"><a class="header" href="#11-what-advantage-do-macros-assert_eq-and-assert_ne-have-over-macro-assert">11. What advantage do macros 'assert_eq' and 'assert_ne' have over macro 'assert'?</a></h4>
<p>Unlike 'assert', they just don't tell you that an equality test is false. They go further to tell you the values of each constituent of the equality check, showing you proof that the operand (left and right) values actually do no not match your equality or non-equality check.</p>
<h4 id="12-the-values-being-compared-inside-assert_eq-and-assert_ne-must-implement-the-partialeq-and-debug-traits-true-or-false"><a class="header" href="#12-the-values-being-compared-inside-assert_eq-and-assert_ne-must-implement-the-partialeq-and-debug-traits-true-or-false">12. The values being compared inside 'assert_eq!' and 'assert_ne!' must implement the &quot;PartialEq&quot; and &quot;Debug&quot; traits, true or false?</a></h4>
<p>True.</p>
<p>N.B:
All the primitive types and most of the standard library types implement these traits.</p>
<h4 id="13-why-must-values-compared-inside-assert_eq-and-assert_ne-implement-traits-partialeq-and-debug"><a class="header" href="#13-why-must-values-compared-inside-assert_eq-and-assert_ne-implement-traits-partialeq-and-debug">13. Why must values compared inside 'assert_eq!' and 'assert_ne!' implement traits &quot;PartialEq&quot; and &quot;Debug&quot;?</a></h4>
<p>Because they both print their arguments using debug formatting.</p>
<h4 id="14-why-would-you-require-implementing-the-partialeq-trait-for-structs-and-enums-you-compare-for-or-against-equality-especially-using-assert_eq-and-assert_ne"><a class="header" href="#14-why-would-you-require-implementing-the-partialeq-trait-for-structs-and-enums-you-compare-for-or-against-equality-especially-using-assert_eq-and-assert_ne">14. Why would you require implementing the &quot;PartialEq&quot; trait for structs and enums you compare for or against equality (especially using 'assert_eq!' and 'assert_ne!')?</a></h4>
<p>To assert that values of those types are equal or not equal.</p>
<h4 id="15-why-would-you-require-implementing-the-debug-trait-for-structs-and-enums-you-compare-for-or-against-equality-especially-using-assert_eq-and-assert_ne"><a class="header" href="#15-why-would-you-require-implementing-the-debug-trait-for-structs-and-enums-you-compare-for-or-against-equality-especially-using-assert_eq-and-assert_ne">15. Why would you require implementing the &quot;Debug&quot; trait for structs and enums you compare for or against equality (especially using 'assert_eq!' and 'assert_ne!')?</a></h4>
<p>To print the values when the assertiton fails.</p>
<h4 id="16-how-can-you-add-traits-partialeq-and-debug-to-your-struct-or-enum-code-which-you-wish-to-compare"><a class="header" href="#16-how-can-you-add-traits-partialeq-and-debug-to-your-struct-or-enum-code-which-you-wish-to-compare">16. How can you add traits 'PartialEq' and 'Debug' to your struct or enum code which you wish to compare?</a></h4>
<p>By annotating your struct or enum with;</p>
<pre><code>  #[derive(PartialEq, Debug)]
</code></pre>
<h4 id="17-how-do-you-add-a-custom-failure-message-to-an-assertion-macro-such-as-assert-assert_eq-or-assert_ne"><a class="header" href="#17-how-do-you-add-a-custom-failure-message-to-an-assertion-macro-such-as-assert-assert_eq-or-assert_ne">17. How do you add a custom failure message to an assertion macro, such as 'assert!', 'assert_eq!', or 'assert_ne'?</a></h4>
<p>By including a string after the required argument of the assertion macro.</p>
<h4 id="18-demonstrate-code-that-adds-a-custom-failure-message-to-assert"><a class="header" href="#18-demonstrate-code-that-adds-a-custom-failure-message-to-assert">18. Demonstrate code that adds a custom failure message to 'assert!'</a></h4>
<p>Here:</p>
<pre><code>  pub fn greeting(name: &amp;str) -&gt; String {
    format!(&quot;Hello {}!&quot;, name)
  }
  #[cfg(test)]
  mod tests {
    use super::*;
    #[test]
    fn greeting_contains_name() {
      let result = greeting(&quot;Carol&quot;);
      assert!(result.contains(&quot;Carol&quot;));
    }
</code></pre>
<h4 id="19-demonstrate-code-that-passes-a-test-only-when-the-code-expression-inside-it-would-cause-a-panic"><a class="header" href="#19-demonstrate-code-that-passes-a-test-only-when-the-code-expression-inside-it-would-cause-a-panic">19. Demonstrate code that passes a test only when the code expression inside it would cause a panic</a></h4>
<p>Here:</p>
<pre><code>  pub struct Guess {
    value: i32,
  }
  impl Guess {
    pub fn new(value: i32) -&gt; Guess {
      if value &lt; 1 {
        panic!(
          &quot;Guess value must be greater than or equal to 1, got {}.&quot;,
          value
        );
      } else if value &gt; 100 {
        panic!(
          &quot;Guess value must be less than or equal to 100, got {}.&quot;,
        panic!(
          &quot;Guess value must be less than or equal to 100, got {}.&quot;,
          value
        );
      }
      Guess { value }
    }
  }
  #[cgf(test)]
  mod tests {
    use super::*;
    #[test]
    #[should_panic(expected = &quot;Guess value must be less than or equal to 100&quot;)]
    fn greater_than_100() {
      Guess::new(200);
    }
  }
</code></pre>
<h4 id="20-write-test-code-thst-use-resultt-e-instead-of-panicking-in-case-of-an-error-ie-in-case-the-test-fails-it-returns-the-e-from-resultt-e"><a class="header" href="#20-write-test-code-thst-use-resultt-e-instead-of-panicking-in-case-of-an-error-ie-in-case-the-test-fails-it-returns-the-e-from-resultt-e">20. Write test code thst use Result&lt;T, E&gt; instead of panicking in case of an error, i.e, in case the test fails, it returns the 'E' from Result&lt;T, E&gt;</a></h4>
<p>Here:</p>
<pre><code>  #[cfg(test)]
  mod tests {
    #[test]
    fn it_works() -&gt; Result&lt;(), String&gt; {
      if 2 + 2 == 4 {
        Ok(())
      } else {
        Err(String::from(&quot;two plus two does not equal four&quot;))
      }
    }
  }
</code></pre>
<h4 id="21-can-you-use-the-should_panic-annotation-on-tests-that-use-resultt-e"><a class="header" href="#21-can-you-use-the-should_panic-annotation-on-tests-that-use-resultt-e">21. Can you use the '#[should_panic]' annotation on tests that use 'Result&lt;T, E&gt;'?</a></h4>
<p>No.
N.B: You should also avoid using the question mark operator on the Result&lt;T, E&gt; value. Instead, use;
<code>assert!(value.is_err())</code></p>
<h4 id="22-what-principles-should-you-follow-when-you-run-multiple-tests-which-run-in-parallel-using-threads"><a class="header" href="#22-what-principles-should-you-follow-when-you-run-multiple-tests-which-run-in-parallel-using-threads">22. What principles should you follow when you run multiple tests which run in parallel using threads?</a></h4>
<ul>
<li>Make sure your tests don't depend on each other</li>
<li>Make sure your test don't depend on any shared environment, such as the current directory or environment variables.
Not following these principles would cause your test to fail, not because the code in incorrect but because the tests have interfered with each other while running parallel.</li>
</ul>
<h4 id="23-suggest-solutions-to-make-tests-which-depend-on-each-other-or-a-shared-environments-not-to-interfere-with-each-other"><a class="header" href="#23-suggest-solutions-to-make-tests-which-depend-on-each-other-or-a-shared-environments-not-to-interfere-with-each-other">23. Suggest solutions to make tests which depend on each other or a shared environments, not to interfere with each other</a></h4>
<ul>
<li>Make sure each test writes to a different file.</li>
<li>Run the tests one at a time.</li>
<li>Control the number of threads used by sending the '--test-threads' flag, like this; $ cargo test -- --test-threads=1 .This command tells cargo test to run the current test using just one thread which effectively causes the tests to not run in parallel. No more parallelism, so now the tests won't interfere with each other (despite sharing state, e.g. a file).</li>
</ul>
<h4 id="24-since-cargo-test-would-capture-successful-test-results-and-only-display-unsuccessful-tests-to-the-standard-output"><a class="header" href="#24-since-cargo-test-would-capture-successful-test-results-and-only-display-unsuccessful-tests-to-the-standard-output">24. Since 'cargo test' would capture successful test results, and only display unsuccessful tests to the standard output;</a></h4>
<p>What command can you use to change the default behavior of 'cargo test', such that it allows the results of successful test code in the current test to be shown as well, instead of being captured</p>
<pre><code>$ cargo test -- --show-output
</code></pre>
<h4 id="25-demonstrate-the-option-you-can-apply-to-cargo-test-cherry-pick-the-sub-tests-you-want-to-run-within-a-test-module"><a class="header" href="#25-demonstrate-the-option-you-can-apply-to-cargo-test-cherry-pick-the-sub-tests-you-want-to-run-within-a-test-module">25. Demonstrate the option you can apply to 'cargo test cherry pick the sub-tests you want to run within a test module</a></h4>
<p>Here:</p>
<pre><code>  // the code with multiple sub-tests
  pub fn add_two(a: i32) -&gt; i32 {
    a + 2
  }
  #[cfg(test)]
  mod tests {
    use super::*;
    //sub-test 1
    #[test]
    fn add_two_ands_two() {
      assert_eq!(4, add_two(2));
    }
    //test 2
    #[test]
    fn add_three_and_two() {
      assert_eq!(5, add_two(3));
    }
    //sub-test 3
    #[test]
    fn one_hundred() {
      assert_eq(102, add_two(100));
    }
  }
</code></pre>
<p>..now the selective test</p>
<pre><code>$ cargo test one_hundred
</code></pre>
<p>As you can see, only the name of the target test(s) should be passed along to 'cargo test' for testing.
Using this testing style would cause 'cargo test' to tell you the name of the tests filtered out from being tested.</p>
<h4 id="26-demonstrate-the-annotation-you-could-use-to-exclude-test-functions-you-do-not-wish-to-be-tested-instead-of-specifying-a-list-of-tests-you-want-to-run-which-would-exclude-all-other-tests-you-do-not-include-in-the-list"><a class="header" href="#26-demonstrate-the-annotation-you-could-use-to-exclude-test-functions-you-do-not-wish-to-be-tested-instead-of-specifying-a-list-of-tests-you-want-to-run-which-would-exclude-all-other-tests-you-do-not-include-in-the-list">26. Demonstrate the annotation you could use to exclude test functions you do not wish to be tested, instead of specifying a list of tests you want to run which would exclude all other tests you do not include in the list</a></h4>
<p>Here:</p>
<pre><code>  //--snip--
  fn it_works() {
    assert_eq!(2 + 2, 4);
  }
  #[test]
  #[ignore]
  fn expensive_test() {
    // code that takes an hour to run
  }
</code></pre>
<p>N.B:
Using this annotation would cause Cargo to not include the ignored test(s) inside the 'filter out' test count.</p>
<h4 id="27-what-cargo-test-option-can-you-use-to-run-only-test-that-has-the--ignore--annotation"><a class="header" href="#27-what-cargo-test-option-can-you-use-to-run-only-test-that-has-the--ignore--annotation">27. What 'cargo test' option can you use to run only test that has the ' #[ignore] ' annotation?</a></h4>
<pre><code>$ cargo test -- --ignored
</code></pre>
<h4 id="28-what-cargo-test-option-can-you-use-to-run-all-tests-whether-theyre-ignored-or-not"><a class="header" href="#28-what-cargo-test-option-can-you-use-to-run-all-tests-whether-theyre-ignored-or-not">28. What 'cargo test' option can you use to run all tests, whether they're ignored or not?</a></h4>
<pre><code>$ cargo test -- --include-ignored
</code></pre>
<h4 id="29-the-rust-community-thinks-about-tests-in-terms-of-two-main-categories-what-are-they"><a class="header" href="#29-the-rust-community-thinks-about-tests-in-terms-of-two-main-categories-what-are-they">29. The Rust community thinks about tests in terms of two main categories, what are they?</a></h4>
<ul>
<li>unit tests</li>
<li>integration tests</li>
</ul>
<h4 id="30-what-is-the-difference-between-a-unit-test-and-an-integration-test"><a class="header" href="#30-what-is-the-difference-between-a-unit-test-and-an-integration-test">30. What is the difference between a unit test and an integration test?</a></h4>
<p>Unit tests: They are small and more focused, testing one module in isolation at a time.
Integration tests: are entirely external to your library and use your code in the same way any other external code would, using only the public interface, and potentially exercising multiple modules per test.
Writing both kinds of tests is important to ensure that the pieces of your library are doing what you expect them, to separely and together.</p>
<h4 id="31-where-would-you-place-your-unit-tests"><a class="header" href="#31-where-would-you-place-your-unit-tests">31. Where would you place your unit tests?</a></h4>
<p>Inside the 'src' directory of your cargo project, alongside each the content of each '.rs' file of the code that they're testing.
The convention is to create a module named 'tests' in each file to cotain the test funtions and to annotate the module with 'cfg(test)'.</p>
<h4 id="32-what-does-annotating-a-test-module-with--cfgtest--cause-or-do"><a class="header" href="#32-what-does-annotating-a-test-module-with--cfgtest--cause-or-do">32. What does annotating a test module with ' #[cfg(test)] ' cause or do?</a></h4>
<p>The #[cfg(test)] annotation on the tests module ttells Rust to compile and run the test code only when you run 'cargo test', not when you run 'cargo build'. this saves compile time when you only want to build the library and saves space in the resulting compiled artifact becuase the tests are not included. You'll see that because integration tests go in a different directory, they don't need the ' #[cfg(test)] ' annotation. However, becuase unit tests go in the smae files as the code, you'll see ' #[cfg(test)] ' to specify that they shouldn't be included in the compiled result.</p>
<h4 id="33-what-does--cfgtest--mean"><a class="header" href="#33-what-does--cfgtest--mean">33. What does ' #[cfg(test)] ' mean?</a></h4>
<p>'cfg' stands for configuration and tells Rust that the following item should only be included given a certain configuration option. In this case, the configuration option is 'test', which is provided by Rust for compiling and running tests. By using the 'cfg' attribute, Cargo compiles our test code only if we actively run the tests with 'cargo test'. This includes any helper functions that might be within this module, in addition to the functions annotated with ' #[test] '.</p>
<h4 id="34-where-do-you-keep-all-your-integration-tests"><a class="header" href="#34-where-do-you-keep-all-your-integration-tests">34. Where do you keep all your integration tests?</a></h4>
<p>Inside the 'tests' directory at the top level of your project directory, next to 'src.
Cargo knows to look for integration test files in this directory.</p>
<h4 id="35-rust-will-compile-each-of-the-test-files-in-the-tests-directory-as-an-individual-crate-true-or-false"><a class="header" href="#35-rust-will-compile-each-of-the-test-files-in-the-tests-directory-as-an-individual-crate-true-or-false">35. Rust will compile each of the test files in the 'tests' directory as an individual crate, true or false?</a></h4>
<p>True.</p>
<h4 id="36-demonstrate-creating-an-integration-test"><a class="header" href="#36-demonstrate-creating-an-integration-test">36. Demonstrate creating an integration test</a></h4>
<p>Assume you create a new library project called 'adder' using Cargo, like this;</p>
<pre><code>$ cargo new adder --lib
</code></pre>
<p>..and you have function called add_two inside the resulting 'src/lib.rs' file of the 'adder' project.</p>
<ul>
<li>Create folder 'tests' to keep your integration test files</li>
<li>Create integration test file 'integration_test.rs' (for example), right inside your 'tests' folder, with the following content:
use adder;</li>
</ul>
<pre><code>  #[test]
  fn it_adds_two() {
    assert_eq!(4, adder::add_two(2));
  }
</code></pre>
<p>N.B:
The reason you need to add 'use adder' at the top of the code, which you don't need in a unit test is because each test file in the 'tests' directory is (regarded) as a separate crate, so you need to bring the library code 'lib.rs' in this case into each test file crate's scope.
Also note;
You don't need to annotate any code in the 'tests/integration_test.rs' with &quot; #[cfg(test)] &quot; because Cargo treats contents inside the 'tests' directory specially and compiles files in this directory only when you run ' cargo test '.</p>
<h4 id="37-in-what-order-do-document-unit-and-integration-tests-run"><a class="header" href="#37-in-what-order-do-document-unit-and-integration-tests-run">37. In what order do document, unit and integration tests run?</a></h4>
<p>Unit tests result get run first, integration tests come second, and then documentation tests come last.</p>
<p>N.B:
Adding more integration test files into the ' tests ' directory would create more integration test result sections (the sections unlike unit tests, are not limited to one).</p>
<h4 id="38-what-cargo-command-can-you-use-to-single-out-an-integration-test-file-inside-the-tests-folder-to-be-run-excluding-unit-tests-and-docu-tests"><a class="header" href="#38-what-cargo-command-can-you-use-to-single-out-an-integration-test-file-inside-the-tests-folder-to-be-run-excluding-unit-tests-and-docu-tests">38. What Cargo command can you use to single out an integration test file inside the 'tests' folder to be run, excluding unit tests, and docu-tests?</a></h4>
<pre><code>$ cargo test --test integration_test
</code></pre>
<h4 id="39-how-do-you-go-about-creating-code-eg-functions-that-would-be-shared-across-multiple-integration-test-files-ie-utility-code-that-would-enable-integration-test-files"><a class="header" href="#39-how-do-you-go-about-creating-code-eg-functions-that-would-be-shared-across-multiple-integration-test-files-ie-utility-code-that-would-enable-integration-test-files">39. How do you go about creating code, e.g functions that would be shared across multiple integration test files, i.e, utility code that would enable integration test files?</a></h4>
<p>By writing the integration tests utilty code inside file sub-directory 'tests/common/mod.rs' within your library project's top directory.</p>
<h4 id="40-demonstrate-code-that-creates-utilizes-an-utility-function-called-setup-defined-inside-sub-directory-testcommonmodrs-inside-your-library-projects-top-directory"><a class="header" href="#40-demonstrate-code-that-creates-utilizes-an-utility-function-called-setup-defined-inside-sub-directory-testcommonmodrs-inside-your-library-projects-top-directory">40. Demonstrate code that creates utilizes an utility function called 'setup' defined inside sub-directory &quot;test/common/mod.rs&quot; inside your library project's top directory</a></h4>
<p>Here:</p>
<pre><code>  // Inside example integration test file ' tests/integration_test.rs ';
  use adder; // adder is the name of the library project itself
  mod common;
  #[test]
  fn it_adds_two() {
    common::setup();
    assert_eq!(4, adder::add_two(2));
  }
</code></pre>
<p>Completed On: Wednesday, June 8, 2022. 11:02PM.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../chapter_13/chapter_13.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../chapter_15/chapter_15.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../chapter_13/chapter_13.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../chapter_15/chapter_15.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
